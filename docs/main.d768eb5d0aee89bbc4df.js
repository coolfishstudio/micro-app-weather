!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["micro-app-weather-main"]=t():e["micro-app-weather-main"]=t()}(self,(()=>(()=>{var e,t,n,r={698:(e,t,n)=>{"use strict";n.r(t),n.d(t,{bootstrap:()=>xe,mount:()=>we,unmount:()=>ge,update:()=>Oe}),n(7941),n(2526),n(7327),n(1539),n(5003),n(9554),n(4747),n(9337),n(3321),n(9070);var r=n(4942),a=n(5861),i=n(4687),c=n.n(i),o=n(7294),s=n(3935),l=n(9439),d=(n(3710),n(2564),n(6535),n(9244),n(1249),n(2222),n(3967)),u=n.n(d),p=n(7557),h=n(894),m=n(913);var f=n(5893);const v=function(){var e=(new Date).getFullYear(),t=2024!==e?"".concat(2024,"-").concat(e):e;return(0,f.jsxs)("div",{className:"micro-app-weather-copyright-_5zZL8",children:[(0,f.jsx)("div",{children:"「基于和风天气提供地区的天气预报」"}),(0,f.jsx)("div",{children:"©".concat(t," Yves")}),(0,f.jsx)("div",{children:"Version: ".concat("24.06.13.142909")})]})},x="micro-app-weather-listPanel-sriqUv",j="micro-app-weather-linePanel-iuYhCL",w="micro-app-weather-text-fQIGns",b="micro-app-weather-flex1-sHxLni";var g=n(270),y=function(e){return{city:"杭州",weatherInfo:null,setWeatherInfo:function(t){return e({weatherInfo:t})}}};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var N=(0,g.Ue)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y.apply(void 0,arguments))})),P=(n(4916),n(7601),n(4723),n(9653),n(5306),n(3843),n(4603),n(8386),n(9714),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss TT";if(e||(e=new Date),"string"==typeof e&&/^\d+$/.test(e)&&(e=new Date(+e)),"number"==typeof e&&(e=new Date(e)),"number"!=typeof e&&!(e instanceof Date)){var n=((e.match(/\+\d+:\d+/)||[])[0]||"").split(":").map(Number);e=e.replace(/年|月/g,"-").replace(/日/g,"");var r=new Date(e).getTime()+6e4*(n[0]||0)+1e3*(n[1]||0);e=new Date(r)}if("timestamp"===t)return"".concat(e.getTime());var a=Date.now()-e.getTime(),i=6e4,c=36e5,o=864e5;if("default"===t){if(a<i)return"刚刚";if(a>=i&&a<c)return"".concat(Math.round(a/i),"分钟前");if(a>=c&&a<o)return"".concat(Math.round(a/c),"小时前");a>=o&&a<1728e5&&(t="昨天 hh:mm");var s=(new Date).getFullYear();t=new Date("".concat(s,"-01-01")).getTime()<=e.getTime()?"MM月dd日 hh:mm":"yyyy年MM月dd日 hh:mm"}var l={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds(),"T+":e.getHours()<12?"AM":"PM","H+":e.getHours()%12==0?12:e.getHours()%12};return/(y+)/.test(t)&&(t=t.replace(RegExp.$1,String(e.getFullYear()).substr(4-RegExp.$1.length))),Object.keys(l).forEach((function(e){new RegExp("(".concat(e,")")).test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?l[e]:"00".concat(l[e]).substr(String(l[e]).length)))})),t}),k=n(2185);const T=function(e){var t=(0,o.useRef)(null),n=(0,o.useRef)(null),r=(0,o.useState)(0),a=(0,l.Z)(r,2),i=a[0],c=a[1];return(0,o.useEffect)((function(){return t.current&&(n.current=new k.kL({container:t.current,autoFit:!0,margin:0,paddingTop:40,paddingBottom:20})),function(){n.current&&n.current.destroy()}}),[]),(0,o.useEffect)((function(){n.current&&e.data&&e.data.length&&i!==(null==e?void 0:e.updateTime)&&(n.current.clear(),n.current.data(e.data).encode("x","time").encode("y","value").encode("color","type").scale("x",{range:[0,1]}).scale("y",{nice:!0}).axis("x",{tick:!1,label:!1,title:!1}).axis("y",{tick:!1,label:!1,title:!1}).legend("color",!1),n.current.line().label({text:"value",style:{dy:-20,textBaseline:"top",textAlign:"center",fill:"#fff"},formatter:function(e){return e+"°"}}).style("stroke","white").tooltip(!1),n.current.point().encode("shape","point").style("fill","white").tooltip(!1),n.current.render(),c(e.updateTime||0))}),[null==e?void 0:e.updateTime,null==e?void 0:e.data]),(0,f.jsx)("div",{className:e.className,ref:t})},D=function(){var e,t,n,r,a,i,c=N((function(e){return e.city})),s=N((function(e){return e.weatherInfo})),d=(0,o.useState)([]),g=(0,l.Z)(d,2),y=g[0],O=g[1],k=(0,o.useState)([]),D=(0,l.Z)(k,2),S=D[0],M=D[1],C=(0,o.useState)({}),E=(0,l.Z)(C,2),Z=E[0],_=E[1],I=(0,o.useState)({}),R=(0,l.Z)(I,2),Y=R[0],z=R[1];return(0,o.useEffect)((function(){var e,t,n,r;null!=s&&s.data&&(M(((null==s||null===(e=s.data)||void 0===e?void 0:e.daily)||[]).flatMap((function(e){return[{time:e.fxDate,value:+e.tempMin,type:"tempMin"},{time:e.fxDate,value:+e.tempMax,type:"tempMax"}]}))),O(((null==s||null===(t=s.data)||void 0===t?void 0:t.hourly)||[]).map((function(e){return{time:e.fxTime,value:+e.temp}}))),_(null==s||null===(n=s.data)||void 0===n?void 0:n.daily[0]),z(null==s||null===(r=s.data)||void 0===r?void 0:r.now))}),[null==s?void 0:s.data]),(0,f.jsxs)("div",{className:"micro-app-weather-container-dD1AqC",children:[(0,f.jsx)("div",{className:u()("micro-app-weather-bgCover-KCZKjm","micro-app-weather-yin_d-Gp4rqR")}),(null==s||null===(e=s.data)||void 0===e?void 0:e.updateTime)&&(0,f.jsxs)("div",{className:"micro-app-weather-panel-hAUptu",children:[(0,f.jsxs)("div",{className:u()("micro-app-weather-topPanel-U5VlYD",b),children:[(0,f.jsx)("div",{className:"micro-app-weather-nowPanel-JEnqP6",children:(0,f.jsxs)("div",{className:"micro-app-weather-weatherNowtmp-jrMs3x",children:[(0,f.jsx)("div",{className:"micro-app-weather-nowTmp-_zQpgf",children:"".concat((null==Y?void 0:Y.temp)||0,"°")}),(0,f.jsxs)("div",{className:"micro-app-weather-info-j0nRpm",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)(p.Z,{}),(0,f.jsxs)("span",{children:[c," 发布于: ",P(null==s||null===(t=s.data)||void 0===t?void 0:t.updateTime,"MM-dd hh:mm")||"-"]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)(h.Z,{}),(0,f.jsx)("span",{children:"".concat((null==Y?void 0:Y.category)||"-"," / ").concat((null==Y?void 0:Y.aqi)||0)})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)(m.Z,{}),(0,f.jsx)("span",{children:"".concat((null==Y?void 0:Y.text)||""," ").concat((null==Y?void 0:Y.windDir)||""," ").concat((null==Y?void 0:Y.windScale)||0,"级")})]})]})]})}),(0,f.jsxs)("div",{className:"micro-app-weather-weatherInfo-QGC9NT",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"温度"}),(0,f.jsx)("span",{children:"".concat((null==Z?void 0:Z.tempMin)||0,"°~").concat((null==Z?void 0:Z.tempMax)||0,"°")})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"湿度"}),(0,f.jsx)("span",{children:"".concat((null==Z?void 0:Z.humidity)||0,"%")})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"降水"}),(0,f.jsx)("span",{children:"".concat((null==Z?void 0:Z.precip)||0,"mm")})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"气压"}),(0,f.jsx)("span",{children:"".concat((null==Z?void 0:Z.pressure)||0,"hPa")})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"日出"}),(0,f.jsx)("span",{children:(null==Z?void 0:Z.sunrise)||"-"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"日落"}),(0,f.jsx)("span",{children:(null==Z?void 0:Z.sunset)||"-"})]})]})]}),(0,f.jsxs)("div",{className:u()(x,"micro-app-weather-flex2-Sk4Nm2","micro-app-weather-hoursPanel-leSuj2"),children:[(0,f.jsx)("h3",{children:"24小时趋势图"}),(0,f.jsxs)("ul",{children:[((null==s||null===(n=s.data)||void 0===n?void 0:n.hourly)||[]).map((function(e,t){return(0,f.jsxs)("li",{children:[(0,f.jsx)("div",{className:w,children:"".concat(P(e.fxTime,"h")||0,"时")}),(0,f.jsx)("div",{className:w,children:e.text||"-"}),(0,f.jsx)("div",{className:b})]},"".concat(t))})),(0,f.jsx)("div",{className:j,children:(0,f.jsx)(T,{updateTime:null==s||null===(r=s.data)||void 0===r?void 0:r.updateTime,data:y})})]})]}),(0,f.jsxs)("div",{className:u()(x,"micro-app-weather-flex4-kYyXUe","micro-app-weather-weekPanel-Z9xcu0"),children:[(0,f.jsx)("h3",{children:"7日趋势图"}),(0,f.jsxs)("ul",{children:[((null==s||null===(a=s.data)||void 0===a?void 0:a.daily)||[]).map((function(e,t){return(0,f.jsxs)("li",{children:[(0,f.jsx)("div",{className:w,children:P(e.fxDate,"MM-dd")||"-"}),(0,f.jsx)("div",{className:w,children:e.textDay||"-"}),(0,f.jsx)("div",{className:b}),(0,f.jsx)("div",{className:w,children:"".concat(e.windScaleDay||0,"级")})]},"".concat(t))})),(0,f.jsx)("div",{className:j,children:(0,f.jsx)(T,{updateTime:null==s||null===(i=s.data)||void 0===i?void 0:i.updateTime,data:S})})]})]})]}),(0,f.jsx)("div",{className:"micro-app-weather-copyright-MwkF1x",children:(0,f.jsx)(v,{})})]})},S=function(e){var t=e.main,n=e.mini,r=e.backdrop;return(0,f.jsxs)("div",{className:"micro-app-weather-layout-HBoKko",children:[(0,f.jsx)("div",{className:"micro-app-weather-backdropContainer-iHutfH",children:r}),(0,f.jsx)("div",{className:"micro-app-weather-mainContainer-BFt30f",children:t}),(0,f.jsx)("div",{className:"micro-app-weather-miniContainer-kY3XGV",children:n})]})},M={mainContainer:"micro-app-weather-mainContainer-VsQE1N",panel:"micro-app-weather-panel-iQtYYx",bgCover:"micro-app-weather-bgCover-T4qSoI",miniContainer:"micro-app-weather-miniContainer-Tkd0vI",header:"micro-app-weather-header-dDKpTz",floor:"micro-app-weather-floor-zhYbV2",nowTmp:"micro-app-weather-nowTmp-RGGHsZ",info:"micro-app-weather-info-ngzC9E",weatherInfo:"micro-app-weather-weatherInfo-l7f7KC",mask:"micro-app-weather-mask-cbLwap",backdrop:"micro-app-weather-backdrop-brTMWg",bgPanel:"micro-app-weather-bgPanel-B6Wke4",image:"micro-app-weather-image-KnFzaJ",video:"micro-app-weather-video-M6IIFW",hoursPanel:"micro-app-weather-hoursPanel-gDNCVj",listPanel:"micro-app-weather-listPanel-bSoFz5",linePanel:"micro-app-weather-linePanel-Mj2SGw",weekPanel:"micro-app-weather-weekPanel-Bw6Cg0",text:"micro-app-weather-text-bWuF6f"};var C={xiayu:{color:"rgba(67,106,102,1)",image:"https://search-operate.cdn.bcebos.com/9669cac22a5833622982ecfdf38f4694.png",video:"https://search-operate.cdn.bcebos.com/5b8fa41e5c92ea8793a99c5081a7a9d8.mp4"},yin:{color:"rgba(109,125,150,1)",image:"https://search-operate.cdn.bcebos.com/1e53eb7bbd8fe233d4deae60abf5ce01.png",video:"https://search-operate.cdn.bcebos.com/98883df887a55c54f90befe517b0f6b8.mp4"},qing:{color:"rgba(92,162,221,1)",image:"https://search-operate.cdn.bcebos.com/cd614b12ef78f515e478c2494086b370.png",video:"https://search-operate.cdn.bcebos.com/3ad889fd821bc79439b29e7600dad777.mp4"},qingwan:{color:"rgba(74,82,130,1)",image:"https://search-operate.cdn.bcebos.com/bee86a441480c0aa9c0adff674f8f715.png",video:"https://search-operate.cdn.bcebos.com/1de63c2303ac334218c0ad19494f6f12.mp4"},duoyun:{color:"rgba(94,165,224,1)",image:"https://search-operate.cdn.bcebos.com/cf23aa483c94da0335d7a42b2682f373.png",video:"https://search-operate.cdn.bcebos.com/23ef1fc7fbd5829ac08f5656a4bfc9ba.mp4"},duoyunwan:{color:"rgba(74,82,130,1)",image:"https://search-operate.cdn.bcebos.com/dcb9d0d77671f3b2e2738cc394f9ee55.png",video:"https://search-operate.cdn.bcebos.com/763f9ffc102867da586d93ac171adb01.mp4"}};const E=function(){var e=N((function(e){return e.city})),t=N((function(e){return e.weatherInfo})),n=(0,o.useState)([]),r=(0,l.Z)(n,2),a=r[0],i=r[1],c=(0,o.useState)([]),s=(0,l.Z)(c,2),d=s[0],x=s[1],j=(0,o.useState)({}),w=(0,l.Z)(j,2),b=w[0],g=w[1],y=(0,o.useState)({}),O=(0,l.Z)(y,2),k=O[0],D=O[1];(0,o.useEffect)((function(){var e,n,r,a;null!=t&&t.data&&(x(((null==t||null===(e=t.data)||void 0===e?void 0:e.daily)||[]).flatMap((function(e){return[{time:e.fxDate,value:+e.tempMin,type:"tempMin"},{time:e.fxDate,value:+e.tempMax,type:"tempMax"}]}))),i(((null==t||null===(n=t.data)||void 0===n?void 0:n.hourly)||[]).map((function(e){return{time:e.fxTime,value:+e.temp}}))),g(null==t||null===(r=t.data)||void 0===r?void 0:r.daily[0]),D(null==t||null===(a=t.data)||void 0===a?void 0:a.now))}),[null==t?void 0:t.data]);var E="duoyunwan",Z=function(e){var t=e.needVideo,n=void 0!==t&&t;return(0,f.jsxs)("div",{className:M.bgPanel,style:{backgroundColor:C[E].color},children:[(0,f.jsx)("div",{className:M.image,style:{backgroundImage:"url(".concat(C[E].image,")")}}),n&&(0,f.jsx)("video",{className:M.video,src:C[E].video,poster:C[E].image,muted:!0,autoPlay:!0,"auto-rotate":"false",playsInline:!0,crossOrigin:"anonymous",loop:!0})]})},_=function(){return(0,f.jsx)("div",{className:M.nowTmp,children:"".concat((null==k?void 0:k.temp)||0,"°")})},I=function(){var n;return(0,f.jsxs)("div",{className:M.info,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)(p.Z,{}),(0,f.jsxs)("span",{children:[e," 发布于: ",P(null==t||null===(n=t.data)||void 0===n?void 0:n.updateTime,"MM-dd hh:mm")||"-"]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)(h.Z,{}),(0,f.jsx)("span",{children:"".concat((null==k?void 0:k.category)||"-"," / ").concat((null==k?void 0:k.aqi)||0)})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)(m.Z,{}),(0,f.jsx)("span",{children:"".concat((null==k?void 0:k.text)||""," ").concat((null==k?void 0:k.windDir)||""," ").concat((null==k?void 0:k.windScale)||0,"级")})]})]})},R=function(){return(0,f.jsxs)("div",{className:M.weatherInfo,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"温度"}),(0,f.jsx)("span",{children:"".concat((null==b?void 0:b.tempMin)||0,"°~").concat((null==b?void 0:b.tempMax)||0,"°")})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"湿度"}),(0,f.jsx)("span",{children:"".concat((null==b?void 0:b.humidity)||0,"%")})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"降水"}),(0,f.jsx)("span",{children:"".concat((null==b?void 0:b.precip)||0,"mm")})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"气压"}),(0,f.jsx)("span",{children:"".concat((null==b?void 0:b.pressure)||0,"hPa")})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"日出"}),(0,f.jsx)("span",{children:(null==b?void 0:b.sunrise)||"-"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h5",{children:"日落"}),(0,f.jsx)("span",{children:(null==b?void 0:b.sunset)||"-"})]})]})},Y=function(){var e,n;return(0,f.jsxs)("div",{className:u()(M.listPanel,M.hoursPanel),children:[(0,f.jsx)("h3",{children:"24小时趋势图"}),(0,f.jsxs)("ul",{children:[((null==t||null===(e=t.data)||void 0===e?void 0:e.hourly)||[]).map((function(e,t){return(0,f.jsxs)("li",{children:[(0,f.jsx)("div",{}),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:M.text,children:"".concat(P(e.fxTime,"h")||0,"时")}),(0,f.jsx)("div",{className:M.text,children:e.text||"-"})]})]},"".concat(t))})),(0,f.jsx)("div",{className:M.linePanel,children:(0,f.jsx)(T,{updateTime:null==t||null===(n=t.data)||void 0===n?void 0:n.updateTime,data:a})})]})]})},z=function(){var e,n;return(0,f.jsxs)("div",{className:u()(M.listPanel,M.weekPanel),children:[(0,f.jsx)("h3",{children:"7日趋势图"}),(0,f.jsxs)("ul",{children:[((null==t||null===(e=t.data)||void 0===e?void 0:e.daily)||[]).map((function(e,t){return(0,f.jsxs)("li",{children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:M.text,children:P(e.fxDate,"MM-dd")||"-"}),(0,f.jsx)("div",{className:M.text,children:e.textDay||"-"})]}),(0,f.jsx)("div",{className:M.flex1}),(0,f.jsx)("div",{className:M.text,children:"".concat(e.windScaleDay||0,"级")})]},"".concat(t))})),(0,f.jsx)("div",{className:M.linePanel,children:(0,f.jsx)(T,{updateTime:null==t||null===(n=t.data)||void 0===n?void 0:n.updateTime,data:d})})]})]})};return(0,f.jsx)(S,{main:(0,f.jsxs)("div",{className:M.mainContainer,children:[(0,f.jsx)("div",{className:M.bgCover,children:(0,f.jsx)(Z,{needVideo:!0})}),(0,f.jsxs)("div",{className:M.panel,children:[(0,f.jsx)(Y,{}),(0,f.jsx)(z,{})]})]}),mini:(0,f.jsxs)("div",{className:M.miniContainer,children:[(0,f.jsx)("div",{className:M.header}),(0,f.jsxs)("div",{className:M.floor,children:[(0,f.jsx)(_,{}),(0,f.jsx)(I,{}),(0,f.jsx)(R,{})]}),(0,f.jsx)("div",{className:M.copyright,children:(0,f.jsx)(v,{})})]}),backdrop:(0,f.jsxs)("div",{className:M.backdrop,children:[(0,f.jsx)(Z,{}),(0,f.jsx)("div",{className:M.mask})]})})},Z=function(){var e=N((function(e){return e.city})),t=N((function(e){return e.weatherInfo})),n=(0,o.useState)({}),r=(0,l.Z)(n,2),a=r[0],i=r[1];return(0,o.useEffect)((function(){var e;null!=t&&t.data&&i(null==t||null===(e=t.data)||void 0===e?void 0:e.now)}),[null==t?void 0:t.data]),null!=a&&a.temp?(0,f.jsx)("div",{className:"micro-app-weather-container-z89bJg",children:(0,f.jsxs)("div",{className:"micro-app-weather-panel-uMPymK",children:[(0,f.jsx)("div",{className:"micro-app-weather-left-mka9kQ",children:(0,f.jsx)("div",{className:"micro-app-weather-icon-Zb6hre",children:(0,f.jsx)("i",{className:"qi-".concat(null==a?void 0:a.icon,"-fill")})})}),(0,f.jsxs)("div",{className:"micro-app-weather-right-xKCtNz",children:[(0,f.jsx)("div",{className:"micro-app-weather-title-Y2kg2X",children:"".concat(null==a?void 0:a.text," ").concat(null==a?void 0:a.temp,"°")}),(0,f.jsx)("div",{className:"micro-app-weather-info-GsnaXt",children:"".concat(e,"天气")})]})]})}):null};var _=n(2982);n(9254),n(5069);const I="micro-app-weather-popupModel-cWVFnE",R="micro-app-weather-maxWindow-UpclWO",Y="micro-app-weather-dialogPanel-Au4QlG",z="micro-app-weather-dialogTool-fpSxBw",B="micro-app-weather-reverse-mfhna1",F="micro-app-weather-btn-tFT8ie",A="micro-app-weather-yellow-JfXiQe",q="micro-app-weather-green-Vro13N",K="micro-app-weather-red-N7z5Z_",W="micro-app-weather-blue-TpOa3T",Q="micro-app-weather-iconClose-iNcfCu",U="micro-app-weather-iconExpandOut-woy2jA",H="micro-app-weather-iconCompressOut-f6AXod",V="micro-app-weather-iconRetract-dDsSpr",G="micro-app-weather-iconLink-UNTZLC",J="micro-app-weather-viewResizeContainer-VNWzPL",L="micro-app-weather-viewResizePanel-tRBWMw";function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e){var t=e.panel,n=e.children,r=e.width,a=void 0===r?1024:r,i=e.height,c=void 0===i?640:i,s=e.visible,d=e.onCancel,p=e.needMaximize,h=void 0!==p&&p,m=e.needRetract,v=void 0===m?null:m,x=e.onRetract,j=e.bgCoverStyles,w=e.link,b=(e.needTrack,e.reverse);if(!t)return n;var g=(0,o.useState)(s||!1),y=(0,l.Z)(g,2),O=y[0],N=y[1],P=(0,o.useState)(s||!1),k=(0,l.Z)(P,2),T=k[0],D=k[1],S=(0,o.useState)(s||h),M=(0,l.Z)(S,2),C=M[0],E=M[1];(0,o.useEffect)((function(){void 0!==s&&(N(s),s&&D(!0))}),[s]);var Z=function(){N(!1),d&&d()};return(0,f.jsxs)(f.Fragment,{children:[function(){if(n)return o.cloneElement(n,{onClick:function(){D(!0),N(!0)}})}(),T&&(0,f.jsx)(_.Z,{open:void 0!==s?s:O,onCancel:Z,afterClose:function(){return D(!1)},destroyOnClose:!0,centered:!0,wrapClassName:u()(I,C&&R),width:a,title:null,footer:null,closable:!1,maskClosable:!1,styles:{mask:{backdropFilter:"blur(2px)"}},children:(0,f.jsx)("div",{className:J,style:{paddingBottom:C?0:"".concat(c/a*100,"%"),height:C?"100%":"0%"},children:(0,f.jsxs)("div",{className:L,style:$({backgroundColor:"#fff"},j),children:[(0,f.jsx)("div",{className:u()(Y),children:t&&t({onClose:Z})}),(0,f.jsxs)("div",{className:u()(z,b&&B),children:[null!==h&&(0,f.jsx)("div",{className:u()(F,q),onClick:function(){E("maximize"==(C?"reduction":"maximize"))},children:C?(0,f.jsx)("i",{className:H}):(0,f.jsx)("i",{className:U})}),null!==v&&(0,f.jsx)("div",{className:u()(F,A),onClick:x||Z,children:(0,f.jsx)("i",{className:V})}),w&&(0,f.jsx)("div",{className:u()(F,W),onClick:function(){window.open(w)},children:(0,f.jsx)("i",{className:G})}),(0,f.jsx)("div",{className:u()(F,K),onClick:Z,children:(0,f.jsx)("i",{className:Q})})]})]})})})]})}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(8674),n(8309),n(6992),n(8783),n(3948),n(8862);var re={set:function(e,t){if(!this.disabled)return void 0===t?this.remove(e):(this.storage.setItem(e,function(e){return JSON.stringify(e)}(t)),t)},get:function(e,t){if(this.disabled)return t;var n=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}}(this.storage.getItem(e));return void 0===n?t:n},has:function(e){return void 0!==this.get(e)},remove:function(e){this.disabled||this.storage.removeItem(e)},clear:function(){this.disabled||this.storage.clear()},getAll:function(){if(this.disabled)return null;var e={};return this.forEach((function(t,n){e[t]=n})),e},forEach:function(e){if(!this.disabled)for(var t=0;t<this.storage.length;t++){var n=this.storage.key(t);e(n,this.get(n))}}};const ae=ne({storage:window.localStorage,session:ne({storage:window.sessionStorage},re)},re);var ie={200:"",204:"请求成功，但你查询的地区暂时没有你需要的数据。",400:"请求错误，可能包含错误的请求参数或缺少必选的请求参数。",401:"认证失败，可能使用了错误的KEY、数字签名错误、KEY的类型错误。",402:"超过访问次数或余额不足以支持继续访问服务，需充值、升级访问量或等待访问量重置。",403:"无访问权限。",404:"查询的数据或地区不存在。",429:"超过限定的QPM",500:"无响应或超时，接口服务异常"};function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se="e87a-76a7-c419-432d-8175-73ef-8997-ca1e".replace(/-/gim,""),le="https://devapi.qweather.com",de="location=".concat(101210101,"&key=").concat(se),ue={getNow:"".concat(le,"/v7/weather/now?").concat(de),get24h:"".concat(le,"/v7/weather/24h?").concat(de),get7d:"".concat(le,"/v7/weather/7d?").concat(de),getAir:"".concat(le,"/v7/air/now?").concat(de)},pe=function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){return{success:"200"===e.code,data:e,message:ie[e.code]||""}})).catch((function(e){return{success:!1,data:null,message:(null==e?void 0:e.message)||"Failed to fetch"}}))},he=function(){var e=(0,a.Z)(c().mark((function e(){var t,r,a,i,o,s,d,u,p,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(4147).u2,!((i=ae.get(a))&&null!==(t=i)&&void 0!==t&&t.updateTimestamp&&Date.now()-i.updateTimestamp<=36e5)){e.next=4;break}return e.abrupt("return",{success:!0,message:"",data:i});case 4:return e.next=6,Promise.all([pe(ue.getNow),pe(ue.get24h),pe(ue.get7d),pe(ue.getAir)]);case 6:return o=e.sent,s=(0,l.Z)(o,4),d=s[0],u=s[1],p=s[2],h=s[3],i=oe(oe(oe(oe(oe({},d.data),u.data),p.data),h.data),{},{now:oe(oe({},d.data.now),h.data.now),updateTimestamp:+P(null==d||null===(r=d.data)||void 0===r?void 0:r.updateTime,"timestamp")}),d.success&&u.success&&p.success&&h.success&&ae.set(a,i),e.abrupt("return",{success:d.success&&u.success&&p.success&&h.success,message:d.message||u.message||p.message||h.message,data:i});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const me=function(e){var t=e.view,n=e.entryUrl,r=N((function(e){return e.setWeatherInfo})),i=function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){i()}),[]);var s=(0,o.useState)(new Date),d=(0,l.Z)(s,2),u=d[0],p=d[1];return(0,o.useEffect)((function(){var e=setTimeout((function(){p(new Date),i()}),9e5);return function(){return clearTimeout(e)}}),[u]),"showroom"===t?(0,f.jsx)(ee,{width:1024,panel:function(){return(0,f.jsx)(E,{})},link:n,needTrack:!0,children:(0,f.jsx)("div",{className:"micro-app-weather-main-TIEcrk",children:(0,f.jsx)(Z,{})})}):(0,f.jsx)(D,{})};function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(){return je.apply(this,arguments)}function je(){return(je=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("react app bootstraped");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return be.apply(this,arguments)}function be(){return(be=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("mount",t),s.render((0,f.jsx)(me,ve({},null==t?void 0:t.props)),t.container?t.container.querySelector("#root"):document.getElementById("root"));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){return ye.apply(this,arguments)}function ye(){return(ye=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.unmountComponentAtNode(t.container?t.container.querySelector("#root"):document.getElementById("root"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("update props",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(4150),window.__POWERED_BY_QIANKUN__||s.render((0,f.jsx)(me,{}),document.getElementById("root"))},4150:(e,t,n)=>{window.__POWERED_BY_QIANKUN__&&(n.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)},4147:e=>{"use strict";e.exports=JSON.parse('{"u2":"micro-app-weather"}')}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e].call(n.exports,n,n.exports,i),n.exports}i.m=r,e=[],i.O=(t,n,r,a)=>{if(!n){var c=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],o=!0,s=0;s<n.length;s++)(!1&a||c>=a)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(o=!1,a<c&&(c=a));if(o){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);i.r(a);var c={};t=t||[null,n({}),n([]),n(n)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,i.d(a,c),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/micro-app-weather/",(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[c,o,s]=n,l=0;if(c.some((t=>0!==e[t]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(s)var d=s(i)}for(t&&t(n);l<c.length;l++)a=c[l],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},n=self.webpackChunkmicro_app_weather_=self.webpackChunkmicro_app_weather_||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=i.O(void 0,[776],(()=>i(698)));return i.O(c)})()));